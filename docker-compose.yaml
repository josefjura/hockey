version: '3.8'

services:
  hockey:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hockey
    environment:
      - "DATABASE_URL=sqlite:///app/data/hockey.db"
      - SESSION_SECRET=${SESSION_SECRET:-your-secret-session-key-change-this-in-production}
      - ENVIRONMENT=${ENVIRONMENT:-development}
      - RUST_LOG=${RUST_LOG:-info}
    volumes:
      - ./data:/app/data
    ports:
      - "8080:8080"
    networks:
      - hockey-network
    restart: unless-stopped
    # Note: Healthcheck removed - distroless has no shell
    # Use external monitoring or Docker's built-in HTTP healthcheck in production

networks:
  hockey-network:
    driver: bridge
